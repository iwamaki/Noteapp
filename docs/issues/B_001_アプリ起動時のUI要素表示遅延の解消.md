---
title: "[B]_[001]_[アプリ起動時のUI要素表示遅延の解消]"
id: 001 # issueのユニークID
status: new # new | in-progress | blocked | pending-review | done
priority: medium # A:high | B:medium | C:low
attempt_count: 0 # このissueへの挑戦回数。失敗のたびにインクリメントする
tags: [UI, UX, performance, initialization] # 例: [UI, navigation, bug]
---

## 概要 (Overview)

アプリケーション起動時、UI要素（特にアイコン）の表示に遅延が発生し、ユーザーエクスペリエンスを損ねています。このIssueは、アプリのメインコンテンツが表示されると同時に、すべてのUI要素が完全にロードされ、スムーズに表示される状態を確立することを目的とします。

## 背景 (Background)

アプリケーションの初期化システムを `AppInitializer` へと刷新しましたが、ユーザーからはアプリ起動時にアイコンが時間差で表示されるという報告がありました。これは、新しい初期化システムが導入されたにもかかわらず、一部のUI関連アセットの読み込みが適切に管理されていないか、または旧来の読み込み方法が残存している可能性を示唆しています。特に `@expo/vector-icons` を利用したアイコンの表示遅延が顕著であり、UIの品質に対する懸念が表明されています。

## 実装方針 (Implementation Strategy)

アプリケーションの起動プロセスを管理する `AppInitializer` のフレームワークを活用し、UI要素の表示に必要なアセット（特にアイコンフォント）の読み込みを初期化フローに統合します。具体的には、以下の戦略で進めます。

1.  **必要なアセットの特定:** アプリケーション全体で使用されているすべてのアイコンフォント（例: `Ionicons`, `MaterialCommunityIcons` など）を特定します。
2.  **初期化タスクの追加:** 特定されたアセットをプリロードするための新しい初期化タスクを `AppInitializer` に追加します。このタスクは、UIの表示に不可欠であるため、`CRITICAL` または `CORE` ステージに配置し、アプリのメインUIがレンダリングされる前に完了するようにします。
3.  **既存の読み込み処理の確認:** もしアイコンフォントの読み込みが `AppInitializer` の外部で、かつ遅延を引き起こしている箇所があれば、その処理を無効化または新しい初期化タスクに統合します。
4.  **検証:** 変更後、アイコンが遅延なく表示されることを確認し、`AppInitializer` のログを通じて新しいタスクが正常に実行されていることを検証します。

## 受け入れ条件 (Acceptance Criteria)

-   [ ] アプリケーション起動後、すべてのアイコンがメインコンテンツと同時に、またはそれ以前に表示されること。
-   [ ] アイコンの表示遅延が解消され、UIのちらつき（FOUC）がなくなること。
-   [ ] `AppInitializer` のデバッグログに、アイコンフォントの読み込みタスクが正常に完了したことを示すメッセージが表示されること。
-   [ ] アプリケーションの起動時間に著しい悪影響がないこと。

## 関連ファイル (Related Files)

-   `app/App.tsx`
-   `app/initialization/AppInitializer.ts`
-   `app/initialization/tasks/index.ts`
-   `app/initialization/types.ts`
-   `app/initialization/tasks/loadIconFonts.ts` (新規作成予定)
-   `app/screen/**/*.tsx` (アイコン使用箇所)
-   `app/components/**/*.tsx` (アイコン使用箇所)
-   `package.json`

## 制約条件 (Constraints)

-   既存の `AppInitializer` のアーキテクチャと設計原則を維持すること。
-   アプリケーションの全体的なパフォーマンス（特に起動時間）を低下させないこと。
-   `@expo/vector-icons` の利用方法に変更を加えないこと（フォントのプリロードに限定）。
-   既存のコードベースのスタイルと規約を遵守すること。

## 開発ログ (Development Log)

---

## AIへの申し送り事項 (Handover to AI)

-   **現在の状況:** アプリケーション起動時のUI要素（アイコン）表示遅延の問題が特定され、`AppInitializer` を活用した解決策の方向性が確立されました。Issue文書が作成済みです。
-   **次のアクション:** このIssue文書に基づき、`AppInitializer` にアイコンフォントのプリロードタスクを追加する実装を開始してください。具体的には、`app/initialization/tasks/loadIconFonts.ts` を作成し、`app/initialization/tasks/index.ts` に登録する作業から着手してください。
-   **考慮事項/ヒント:** `app/initialization/types.ts` で定義されている `InitializationTask` インターフェースに厳密に準拠してください。`Font.loadAsync` を使用して `Ionicons` と `MaterialCommunityIcons` のフォントを読み込む必要があります。
