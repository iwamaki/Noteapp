---
title: "UI改善：ヘッダーメニューとアンドゥ・リドゥボタンの実装"
id: 38
status: new
priority: medium
tags: [ui, ux, feature, header, undo-redo]
---

## 概要 (Overview)

ノート編集画面のヘッダーUIを改善し、アンドゥ・リドゥ機能をユーザーが利用できるようにする。具体的には、ヘッダー右上にハンバーガーメニューを設置して各種アクションを格納し、アンドゥ・リドゥボタンを状態に応じて見た目が変わる形で配置する。

## 背景 (Background)

`NoteService`にはアンドゥ・リドゥのロジックが実装済みだが、それを呼び出すためのUIが存在しない。このIssueは、ユーザーからの提案に基づき、よりクリーンで直感的なヘッダーUIを設計し、アンドゥ・リドゥ機能をユーザーに提供することを目的とする。

## 受け入れ条件 (Acceptance Criteria)

### ヘッダー構造の改善
- [ ] 1. ノート編集画面のヘッダー右上にハンバーガーメニューアイコンが表示される。
- [ ] 2. ヘッダーから「保存」ボタン以外の既存ボタン（例：「差分表示」）が削除される。
- [ ] 3. ハンバーガーメニューをタップすると、削除されたボタンの機能（「差分表示」など）がメニュー項目として表示される。

### アンドゥ・リドゥボタンの実装
- [ ] 4. ヘッダーの適切な位置に、「アンドゥ」と「リドゥ」のボタン（アイコン）が配置される。
- [ ] 5. ノートに変更がなく、アンドゥ・リドゥが実行不可能な場合、両ボタンは半透明で表示される。
- [ ] 6. ノートに変更が加えられ、アンドゥが可能な場合、「アンドゥ」ボタンが不透明（通常表示）になる。
- [ ] 7. アンドゥを実行し、リドゥが可能になった場合、「リドゥ」ボタンが不透明になる。
- [ ] 8. 「アンドゥ」ボタンをタップすると、`noteService.undo()`が呼び出され、ノートの状態が一つ前に戻る。
- [ ] 9. 「リドゥ」ボタンをタップすると、`noteService.redo()`が呼び出され、ノートの状態が一つ進む。

## 関連ファイル (Related Files)

- `app/features/note-edit/components/NoteEditHeader.tsx` (修正対象のヘッダーコンポーネント)
- `app/features/note-edit/hooks/useNoteEditHeader.tsx` (ヘッダーのロジックを管理するフック)
- `app/services/NoteService.ts` (アンドゥ・リドゥのロジックと状態を持つサービス)
- `app/navigation/RootNavigator.tsx` (ヘッダー設定の変更が必要な場合がある)
