<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 700">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #333; }
      .subtitle { font: bold 14px sans-serif; fill: #666; }
      .label { font: 12px sans-serif; fill: #888; }
      .code { font: 11px monospace; fill: #555; }
      .problem { font: 12px sans-serif; fill: #c00; }
      .solution { font: 12px sans-serif; fill: #080; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="800" height="700" fill="#fafafa"/>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Chat Bubble Layout Proposal</text>

  <!-- ========== CURRENT LAYOUT (BEFORE) ========== -->
  <text x="200" y="70" text-anchor="middle" class="subtitle">BEFORE (Current)</text>

  <!-- Phone frame -->
  <rect x="50" y="90" width="300" height="250" rx="15" fill="#fff" stroke="#ccc" stroke-width="2"/>

  <!-- User message -->
  <rect x="170" y="110" width="160" height="40" rx="12" fill="#007AFF"/>
  <text x="250" y="135" text-anchor="middle" font-size="11" fill="white">User message</text>

  <!-- AI message wrapper (row layout) -->
  <g transform="translate(70, 165)">
    <!-- AI Icon on left -->
    <circle cx="15" cy="45" r="14" fill="#E8F0FE" stroke="#007AFF" stroke-width="1.5"/>
    <text x="15" y="50" text-anchor="middle" font-size="14">ðŸ¤–</text>
    <text x="15" y="75" text-anchor="middle" class="label">Icon</text>

    <!-- Chat bubble (limited width) -->
    <rect x="40" y="5" width="180" height="80" rx="12" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
    <text x="130" y="30" text-anchor="middle" font-size="10" fill="#333">AI response text here.</text>
    <text x="130" y="45" text-anchor="middle" font-size="10" fill="#333">Limited width due to</text>
    <text x="130" y="60" text-anchor="middle" font-size="10" fill="#333">icon placement...</text>

    <!-- Width indicator -->
    <line x1="40" y1="95" x2="220" y2="95" stroke="#c00" stroke-width="1" stroke-dasharray="3"/>
    <text x="130" y="110" text-anchor="middle" class="problem">maxWidth limited</text>
  </g>

  <!-- Problem annotation -->
  <rect x="60" y="300" width="280" height="35" rx="5" fill="#FEE" stroke="#c00" stroke-width="1"/>
  <text x="200" y="322" text-anchor="middle" class="problem">Problem: Icon takes horizontal space</text>

  <!-- ========== PROPOSED LAYOUT (AFTER) ========== -->
  <text x="600" y="70" text-anchor="middle" class="subtitle">AFTER (Proposed)</text>

  <!-- Phone frame -->
  <rect x="450" y="90" width="300" height="250" rx="15" fill="#fff" stroke="#ccc" stroke-width="2"/>

  <!-- User message -->
  <rect x="570" y="110" width="160" height="40" rx="12" fill="#007AFF"/>
  <text x="650" y="135" text-anchor="middle" font-size="11" fill="white">User message</text>

  <!-- AI message wrapper (column layout) -->
  <g transform="translate(465, 165)">
    <!-- Chat bubble (full width) -->
    <rect x="0" y="0" width="270" height="70" rx="12" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
    <text x="135" y="25" text-anchor="middle" font-size="10" fill="#333">AI response text here. Now the bubble can use</text>
    <text x="135" y="40" text-anchor="middle" font-size="10" fill="#333">the full width of the container, providing more</text>
    <text x="135" y="55" text-anchor="middle" font-size="10" fill="#333">space for text content and better readability!</text>

    <!-- AI Icon below bubble (left aligned) -->
    <circle cx="20" cy="90" r="12" fill="#E8F0FE" stroke="#007AFF" stroke-width="1.5"/>
    <text x="20" y="94" text-anchor="middle" font-size="12">ðŸ¤–</text>

    <!-- Width indicator -->
    <line x1="0" y1="115" x2="270" y2="115" stroke="#080" stroke-width="1" stroke-dasharray="3"/>
    <text x="135" y="130" text-anchor="middle" class="solution">Full width available!</text>
  </g>

  <!-- Solution annotation -->
  <rect x="460" y="300" width="280" height="35" rx="5" fill="#EFE" stroke="#080" stroke-width="1"/>
  <text x="600" y="322" text-anchor="middle" class="solution">Solution: Icon below, bubble full width</text>

  <!-- ========== CODE CHANGES ========== -->
  <text x="400" y="380" text-anchor="middle" class="subtitle">Key Style Changes</text>

  <!-- Code box -->
  <rect x="50" y="400" width="700" height="280" rx="8" fill="#2d2d2d"/>

  <!-- Before code -->
  <text x="70" y="430" fill="#FF6B6B" font-size="12" font-weight="bold">// Before (row layout)</text>
  <text x="70" y="455" class="code" fill="#98D8C8">aiMessageWrapper: {</text>
  <text x="90" y="475" class="code" fill="#F8B195">  flexDirection: 'row',</text>
  <text x="90" y="495" class="code" fill="#aaa">  alignItems: 'flex-end',</text>
  <text x="90" y="515" class="code" fill="#aaa">  maxWidth: '85%',</text>
  <text x="70" y="535" class="code" fill="#98D8C8">}</text>

  <!-- After code -->
  <text x="420" y="430" fill="#90EE90" font-size="12" font-weight="bold">// After (column layout)</text>
  <text x="420" y="455" class="code" fill="#98D8C8">aiMessageWrapper: {</text>
  <text x="440" y="475" class="code" fill="#90EE90">  flexDirection: 'column',</text>
  <text x="440" y="495" class="code" fill="#90EE90">  alignItems: 'flex-start',</text>
  <text x="440" y="515" class="code" fill="#90EE90">  alignSelf: 'stretch',  // full width</text>
  <text x="420" y="535" class="code" fill="#98D8C8">}</text>

  <!-- Icon style change -->
  <text x="420" y="565" class="code" fill="#98D8C8">aiIcon: {</text>
  <text x="440" y="585" class="code" fill="#90EE90">  marginTop: 8,  // space above icon</text>
  <text x="440" y="605" class="code" fill="#90EE90">  marginLeft: 4, // slight indent</text>
  <text x="420" y="625" class="code" fill="#98D8C8">}</text>

  <!-- Bubble style -->
  <text x="70" y="565" class="code" fill="#98D8C8">aiMessage: {</text>
  <text x="90" y="585" class="code" fill="#90EE90">  alignSelf: 'stretch', // full width</text>
  <text x="90" y="605" class="code" fill="#aaa">  // remove maxWidth constraint</text>
  <text x="70" y="625" class="code" fill="#98D8C8">}</text>

</svg>
