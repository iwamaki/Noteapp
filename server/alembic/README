# Alembic マイグレーション

このディレクトリにはAlembicデータベースマイグレーションスクリプトが含まれています。

## セットアップ

1. 依存関係のインストール:
```bash
pip install -r requirements/base.txt
```

2. 環境変数の設定:
`.env`ファイルにデータベースURLを設定してください。

## マイグレーションの作成

### 自動生成（推奨）:
```bash
alembic revision --autogenerate -m "マイグレーションの説明"
```

### 手動作成:
```bash
alembic revision -m "マイグレーションの説明"
```

## マイグレーションの適用

### 最新バージョンに更新:
```bash
alembic upgrade head
```

### 特定のリビジョンに更新:
```bash
alembic upgrade <revision_id>
```

## マイグレーションのロールバック

### 1つ前のバージョンに戻す:
```bash
alembic downgrade -1
```

### 特定のリビジョンに戻す:
```bash
alembic downgrade <revision_id>
```

## マイグレーション履歴の確認

```bash
alembic history
```

## 現在のリビジョンの確認

```bash
alembic current
```

## 注意事項

- マイグレーションを作成する前に、モデルの変更が正しいことを確認してください
- 本番環境へのマイグレーション適用前に、必ずバックアップを取得してください
- autogenerateは完璧ではないため、生成されたマイグレーションスクリプトを必ず確認してください
