[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = False
disallow_incomplete_defs = False
explicit_package_bases = True
namespace_packages = True

# SQLAlchemy plugin for better type checking
plugins = sqlalchemy.ext.mypy.plugin

# Ignore missing imports for third-party libraries
[mypy-google.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

# Relax type checking for persistence layer due to SQLAlchemy descriptors
[mypy-src.persistence.repositories.*]
disable_error_code = arg-type, assignment

# Relax type checking for old code that hasn't been migrated yet
[mypy-src.api.*]
disable_error_code = arg-type, assignment, call-arg

[mypy-src.auth.*]
disable_error_code = arg-type, assignment, no-any-return, import-untyped

[mypy-src.billing.*]
disable_error_code = arg-type, assignment
